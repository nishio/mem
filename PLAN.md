# Visual Thinking Gallery - Array Order vs Addition Order Problem

## å•é¡Œã®æœ¬è³ª

**é…åˆ—é † â‰  è¿½åŠ é †** ã«ãªã£ã¦ã„ã‚‹ã€‚

### ç¾çŠ¶
- vt_config.jsonã®é…åˆ—ã¯**IDé †**ã«ã‚½ãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹
- `add_from_add_new_vt.js` ãŒLine 115-116ã§ **IDã‚½ãƒ¼ãƒˆ**ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹
- æ–°è¦è¿½åŠ ãƒšãƒ¼ã‚¸ã¯æ¬ ç•ªã‚’åŸ‹ã‚ã‚‹ãŸã‚ã€é…åˆ—ã®**é€”ä¸­**ã«æŒ¿å…¥ã•ã‚Œã‚‹

### æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ
- é…åˆ—é † = è¿½åŠ é †ï¼ˆæ™‚é–“é †ï¼‰
- æ–°è¦ãƒšãƒ¼ã‚¸ã¯å¸¸ã«é…åˆ—ã®**æœ€å¾Œ**ã«è¿½åŠ 
- IDã§ã‚½ãƒ¼ãƒˆã—ã¦ã¯ã„ã‘ãªã„

### å…·ä½“çš„ãªå•é¡Œ
`/ja/vt/latest` ãƒšãƒ¼ã‚¸ã§ `illusts.reverse()` ã‚’ä½¿ã£ã¦ã„ã‚‹ãŒï¼š
- é…åˆ—ã®æœ€å¾Œ = ID 250ï¼ˆ2025-11-25è¿½åŠ ï¼‰
- ä»Šæ—¥è¿½åŠ ã—ãŸãƒšãƒ¼ã‚¸ï¼ˆID 100, 121, 190, 197, 199, 205, 208, 209, 215, 217, 230, 235, 236, 237ï¼‰ã¯é…åˆ—ã®é€”ä¸­ã«æŒ¿å…¥ã•ã‚Œã¦ã„ã‚‹
- **çµæœ**: æœ€è¿‘è¿½åŠ ã—ãŸãƒšãƒ¼ã‚¸ãŒ /latest ã®å¾ŒåŠã«è¡¨ç¤ºã•ã‚Œã‚‹

## è§£æ±ºæ–¹æ³•

### 1. ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¿®æ­£ï¼šIDã‚½ãƒ¼ãƒˆã‚’å‰Šé™¤

`scripts/add_from_add_new_vt.js` ã® Line 115-116 ã‚’å‰Šé™¤ï¼š

```javascript
// IDã§ã‚½ãƒ¼ãƒˆ  â† ã“ã®2è¡Œã‚’å‰Šé™¤
config.illusts.sort((a, b) => a.id - b.id);
```

**ç†ç”±**: æ–°è¦è¿½åŠ ã¯é…åˆ—ã®æœ€å¾Œã«`push()`ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã‚½ãƒ¼ãƒˆã—ãªã‘ã‚Œã°è¿½åŠ é †ãŒä¿ãŸã‚Œã‚‹ã€‚

### 2. vt_config.jsonä¿®æ­£ï¼šä»Šæ—¥è¿½åŠ ã—ãŸ14ãƒšãƒ¼ã‚¸ã‚’é…åˆ—ã®æœ€å¾Œã«ç§»å‹•

**è¿½åŠ é †ï¼ˆgitå±¥æ­´ã‹ã‚‰ç¢ºèªï¼‰:**
1. ID 1-250 (2025-11-25ã¾ã§ã«è¿½åŠ ã€IDé †)
2. ID 100, 121, 190, 197, 199, 205 (2025-12-02 ä»Šæ—¥è¿½åŠ ã€æ¬ ç•ªåŸ‹ã‚)
3. ID 208, 209, 215, 217, 230, 235, 236, 237 (2025-12-02 ä»Šæ—¥è¿½åŠ ã€æ–°è¦ID)

**æ­£ã—ã„é…åˆ—é †:**
```
[ID 1-99, 101-120, 122-189, 191-196, 198, 200-204, 206-207, 210-214, 216, 218-229, 231-234, 238-250,
 ID 100, 121, 190, 197, 199, 205, 208, 209, 215, 217, 230, 235, 236, 237]
```

ã¤ã¾ã‚Šã€ä»Šæ—¥è¿½åŠ ã—ãŸ14ãƒšãƒ¼ã‚¸ã‚’é…åˆ—ã‹ã‚‰å‰Šé™¤ã—ã¦ã€æœ€å¾Œã«è¿½åŠ ã—ç›´ã™ã€‚

## è§£æ±ºæ¡ˆã®æ¤œè¨

### æ¡ˆ1: é…åˆ—ã®é †åºã§ã‚½ãƒ¼ãƒˆï¼ˆreverse()ã‚’ä½¿ç”¨ï¼‰

**å®Ÿè£…æ–¹æ³•:**
```typescript
// vt_config.jsonã®é…åˆ—é †ã‚’ãã®ã¾ã¾ä½¿ã†
// æ–°ã—ã„ãƒšãƒ¼ã‚¸ã¯é…åˆ—ã®æœ€å¾Œã«è¿½åŠ ã•ã‚Œã‚‹ã®ã§ã€reverseã™ã‚Œã°æœ€æ–°é †
illusts.reverse();
```

**Pros:**
- âœ… å®Ÿè£…ãŒæœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ï¼ˆ1è¡Œã®å¤‰æ›´ï¼‰
- âœ… æ—¢å­˜ã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’å¤‰æ›´ã—ãªã„
- âœ… è¿½åŠ ã®ä¿å®ˆã‚³ã‚¹ãƒˆãªã—
- âœ… `add_from_add_new_vt.js`ãŒã™ã§ã«é…åˆ—ã®æœ€å¾Œã«è¿½åŠ ã—ã¦ã„ã‚‹

**Cons:**
- âŒ vt_config.jsonã®é…åˆ—é †åºã«ä¾å­˜ï¼ˆIDã§ã‚½ãƒ¼ãƒˆã™ã‚‹ã¨å£Šã‚Œã‚‹ï¼‰
- âŒ é…åˆ—ã®é †åºãŒã€Œè¿½åŠ é †ã€ã§ã‚ã‚‹ã“ã¨ãŒæš—é»™ã®å‰æ
- âŒ æ‰‹å‹•ã§é…åˆ—ã‚’ä¸¦ã³æ›¿ãˆã‚‹ã¨ã€Œæœ€æ–°é †ã€ãŒå£Šã‚Œã‚‹
- âŒ ç›´æ„Ÿçš„ã§ãªã„ï¼ˆIDã¨ã¯ç„¡é–¢ä¿‚ï¼‰

**ãƒªã‚¹ã‚¯:**
- ä¸­ãƒªã‚¹ã‚¯: èª°ã‹ãŒvt_config.jsonã‚’IDã§ã‚½ãƒ¼ãƒˆã—ã¦ã—ã¾ã†å¯èƒ½æ€§
- å¯¾ç­–: ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§é…åˆ—é †åºã‚’ä¿è¨¼ã™ã‚‹ã€ã¾ãŸã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–

---

### æ¡ˆ2: ãƒ¬ã‚³ãƒ¼ãƒ‰ã«created_atãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ 

**å®Ÿè£…æ–¹æ³•:**
```json
{
  "id": 237,
  "page_ja": "ä¼šè­°å‡ºå¸­ä»£è¡Œ",
  "page_en": null,
  "tags": [],
  "created_at": "2025-12-02T10:30:00Z"
}
```

```typescript
// created_atã§ã‚½ãƒ¼ãƒˆ
illusts.sort((a, b) =>
  new Date(b.created_at).getTime() - new Date(a.created_at).getTime()
);
```

**Pros:**
- âœ… æœ€ã‚‚æ˜ç¤ºçš„ã§ç›´æ„Ÿçš„
- âœ… é…åˆ—é †åºã«ä¾å­˜ã—ãªã„
- âœ… å°†æ¥çš„ã«ã€Œè¿½åŠ æ—¥æ™‚ã€ã‚’è¡¨ç¤ºã§ãã‚‹
- âœ… IDã¨ã¯ç‹¬ç«‹ã—ã¦ç®¡ç†ã§ãã‚‹

**Cons:**
- âŒ æ—¢å­˜ã®250ä»¶ã™ã¹ã¦ã«created_atã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
- âŒ éå»ã®ãƒšãƒ¼ã‚¸ã®è¿½åŠ æ—¥æ™‚ãŒä¸æ˜ï¼ˆæ¨æ¸¬ã¾ãŸã¯ãƒ€ãƒŸãƒ¼å€¤ï¼‰
- âŒ `add_from_add_new_vt.js`ã‚’ä¿®æ­£ã—ã¦created_atã‚’è‡ªå‹•ä»˜ä¸
- âŒ æ‰‹å‹•è¿½åŠ æ™‚ã«created_atã‚’å¿˜ã‚Œã‚‹ãƒªã‚¹ã‚¯
- âŒ ãƒ‡ãƒ¼ã‚¿é‡ãŒå¢—ãˆã‚‹ï¼ˆ250ä»¶ Ã— 24æ–‡å­— = 6KBï¼‰

**å®Ÿè£…ã‚³ã‚¹ãƒˆ:**
- é«˜: æ—¢å­˜250ä»¶ã¸ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- ä¸­: ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¿®æ­£
- ä½: latest.tsxã®ä¿®æ­£

---

### æ¡ˆ3: IDã‚’è¿½åŠ é †ã«ä»˜ã‘æ›¿ãˆ

**å®Ÿè£…æ–¹æ³•:**
1. ç¾åœ¨ã®IDã‚’ä¿æŒï¼ˆ`old_id`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼‰
2. é…åˆ—é †ã«ID 1, 2, 3...ã¨å†æ¡ç•ª
3. URLã¯å¤‰ã‚ã‚‰ãªã„ã‚ˆã†ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ

**Pros:**
- âœ… ID = è¿½åŠ é †ã¨ã„ã†ç›´æ„Ÿçš„ãªé–¢ä¿‚
- âœ… é…åˆ—é †åºã«ä¾å­˜ã—ãªã„
- âœ… IDã§ã‚½ãƒ¼ãƒˆã™ã‚Œã°æœ€æ–°é †

**Cons:**
- âŒ **ç ´å£Šçš„å¤‰æ›´**: æ—¢å­˜ã®URLãŒã™ã¹ã¦å¤‰ã‚ã‚‹
- âŒ ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãŒç„¡åŠ¹ã«ãªã‚‹
- âŒ SEOã¸ã®å½±éŸ¿
- âŒ ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆè¨­å®šãŒè¤‡é›‘ï¼ˆ250ä»¶ï¼‰
- âŒ ä»–ã®ã‚·ã‚¹ãƒ†ãƒ ã¨ã®é€£æºãŒå£Šã‚Œã‚‹å¯èƒ½æ€§
- âŒ å®Ÿè£…ã‚³ã‚¹ãƒˆãŒæœ€ã‚‚é«˜ã„

**ãƒªã‚¹ã‚¯:**
- é«˜ãƒªã‚¹ã‚¯: URLã®å¤‰æ›´ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’æãªã†
- å¯¾ç­–: ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã§å¯¾å¿œã™ã‚‹ãŒã€è¤‡é›‘

---

### æ¡ˆ4: é…åˆ—é †åº + æ˜ç¤ºçš„ãªindexç®¡ç†

**å®Ÿè£…æ–¹æ³•:**
1. vt_config.jsonã®é…åˆ—é †åºã‚’ã€Œè¿½åŠ é †ã€ã¨ã—ã¦å³æ ¼ã«ç®¡ç†
2. ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§é…åˆ—é †åºã‚’ä¿è¨¼ï¼ˆIDã§ã‚½ãƒ¼ãƒˆã—ãªã„ï¼‰
3. latest.tsxã§`illusts.reverse()`ã‚’ä½¿ç”¨

**Pros:**
- âœ… å®Ÿè£…ãŒç°¡å˜ï¼ˆæ¡ˆ1ã¨åŒã˜ï¼‰
- âœ… ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’å¤‰æ›´ã—ãªã„
- âœ… ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ä¿è¨¼ã™ã‚Œã°ãƒªã‚¹ã‚¯è»½æ¸›

**Cons:**
- âŒ æš—é»™ã®ãƒ«ãƒ¼ãƒ«ã«ä¾å­˜
- âŒ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ãŒå¿…è¦
- âŒ æ‰‹å‹•ç·¨é›†æ™‚ã®ãƒŸã‚¹ã®ãƒªã‚¹ã‚¯

**å®Ÿè£…ã‚³ã‚¹ãƒˆ:**
- ä½: latest.tsxã®1è¡Œå¤‰æ›´
- ä½: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè¿½åŠ 
- ä¸­: ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã®é †åºä¿è¨¼

---

### æ¡ˆ5: ä¸¡æ–¹ã‚’ä½µç”¨ï¼ˆé…åˆ—é †åº + created_atï¼‰

**å®Ÿè£…æ–¹æ³•:**
1. çŸ­æœŸ: é…åˆ—é †åºã§ã‚½ãƒ¼ãƒˆï¼ˆreverse()ï¼‰
2. é•·æœŸ: created_atãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æ®µéšçš„ã«è¿½åŠ 
   - æ–°è¦è¿½åŠ ãƒšãƒ¼ã‚¸ã‹ã‚‰è‡ªå‹•ä»˜ä¸
   - æ—¢å­˜ãƒšãƒ¼ã‚¸ã¯å¾Œå›ã—ï¼ˆé…åˆ—é †åºã§ä»£ç”¨ï¼‰

**Pros:**
- âœ… çŸ­æœŸçš„ã«ã™ãä¿®æ­£ã§ãã‚‹
- âœ… é•·æœŸçš„ã«å …ç‰¢ãªã‚·ã‚¹ãƒ†ãƒ ã«ç§»è¡Œ
- âœ… æ®µéšçš„ãªç§»è¡Œã§ãƒªã‚¹ã‚¯åˆ†æ•£

**Cons:**
- âŒ ç§»è¡ŒæœŸé–“ä¸­ã®è¤‡é›‘ã•
- âŒ 2ã¤ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç¶­æŒã™ã‚‹å¿…è¦

---

## é‡è¦ãªç™ºè¦‹: Prev/Nextãƒªãƒ³ã‚¯ã®å®Ÿè£…

### ç¾åœ¨ã®å®Ÿè£…ï¼ˆ`[page].tsx` Line 309-316ï¼‰

```typescript
const getPrevId = () => {
  if (props.currentIndex <= 0) return null;
  return props.currentIndex; // âŒ BUG: Returns index, not ID!
};
const getNextId = () => {
  if (props.currentIndex >= props.totalIllusts - 1) return null;
  return props.currentIndex + 2; // âŒ BUG: Returns index+2, not ID!
};
```

**å•é¡Œç‚¹:**
- `currentIndex`ã¯é…åˆ—ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆ0å§‹ã¾ã‚Šï¼‰
- ã§ã‚‚IDã‚’è¿”ãã†ã¨ã—ã¦ã„ã‚‹
- ã“ã‚Œã¯ã€Œ**é…åˆ—ã®é †åº = IDé †**ã€ã¨ã„ã†å‰æã§ã®ã¿å‹•ä½œã™ã‚‹
- å®Ÿéš›ã«ã¯ã€`config.illusts[currentIndex]`ã¨`config.illusts[currentIndex + 1]`ã®IDã‚’è¿”ã™ã¹ã

### æ­£ã—ã„å®Ÿè£…

```typescript
const getPrevId = () => {
  if (props.currentIndex <= 0) return null;
  return config.illusts[props.currentIndex - 1].id;
};
const getNextId = () => {
  if (props.currentIndex >= props.totalIllusts - 1) return null;
  return config.illusts[props.currentIndex + 1].id;
};
```

ã—ã‹ã—ã€ã“ã‚Œã‚’å®Ÿè£…ã™ã‚‹ã«ã¯`config.illusts`å…¨ä½“ã‚’propsã§æ¸¡ã™å¿…è¦ãŒã‚ã‚‹ã€‚

### å„æ¡ˆã¸ã®å½±éŸ¿

#### æ¡ˆ1: é…åˆ—ã®é †åºã§ã‚½ãƒ¼ãƒˆï¼ˆreverse()ï¼‰
- âŒ **Prev/Nextãƒªãƒ³ã‚¯ãŒå£Šã‚Œã‚‹**
- `/latest`ãƒšãƒ¼ã‚¸ã¯é…åˆ—é€†é †ã€å€‹åˆ¥ãƒšãƒ¼ã‚¸ã¯é…åˆ—é †
- ä¸æ•´åˆãŒç™ºç”Ÿ

#### æ¡ˆ2: created_atãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ 
- âœ… Prev/Nextãƒªãƒ³ã‚¯ã¯é…åˆ—é †ã®ã¾ã¾ï¼ˆå•é¡Œãªã—ï¼‰
- `/latest`ãƒšãƒ¼ã‚¸ã ã‘created_atã§ã‚½ãƒ¼ãƒˆ
- ä¸æ•´åˆãŒç™ºç”Ÿ

#### æ¡ˆ3: IDã‚’è¿½åŠ é †ã«ä»˜ã‘æ›¿ãˆ
- âœ… **Prev/Nextãƒªãƒ³ã‚¯ãŒæ­£ã—ãå‹•ä½œã™ã‚‹**
- IDé † = è¿½åŠ é † = é…åˆ—é †
- ãŸã ã—ç ´å£Šçš„å¤‰æ›´

#### æ¡ˆ4: é…åˆ—é †åº + æ˜ç¤ºçš„ãªç®¡ç†
- âš ï¸ **è¦æ³¨æ„**: Prev/Nextãƒªãƒ³ã‚¯ã¯ç¾åœ¨ã€Œå¶ç„¶ã€é…åˆ—é †ã§å‹•ä½œã—ã¦ã„ã‚‹
- ãƒã‚°ã‚’ä¿®æ­£ã™ã‚‹ã¨ã€ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®æ„å‘³ãŒå¤‰ã‚ã‚‹å¯èƒ½æ€§

#### æ¡ˆ5: ä¸¡æ–¹ã‚’ä½µç”¨
- âŒ Prev/Nextãƒªãƒ³ã‚¯ã¨latestãƒšãƒ¼ã‚¸ã®é †åºãŒä¸æ•´åˆ

### çµè«–

**ç¾åœ¨ã®Prev/Nextãƒªãƒ³ã‚¯ã¯é…åˆ—é †ã§å‹•ä½œã—ã¦ã„ã‚‹ï¼ˆãƒã‚°ã ãŒçµæœçš„ã«ï¼‰**

ã©ã®æ¡ˆã‚’æ¡ç”¨ã™ã‚‹ã‹ã¯ã€ä»¥ä¸‹ã®è³ªå•ã«ç­”ãˆã‚‹å¿…è¦ãŒã‚ã‚‹ï¼š
1. **Prev/Nextãƒªãƒ³ã‚¯ã¯ä½•é †ã§ã‚ã‚‹ã¹ãã‹ï¼Ÿ**
   - IDé †ï¼Ÿ
   - é…åˆ—é †ï¼ˆ= è¿½åŠ é †ï¼‰ï¼Ÿ
   - åŒã˜ï¼Ÿ

2. **`/latest`ãƒšãƒ¼ã‚¸ã®é †åºã¨ä¸€è‡´ã™ã¹ãã‹ï¼Ÿ**
   - Yes: é…åˆ—é †ã§çµ±ä¸€
   - No: åˆ¥ã€…ã®é †åºã§OK

## æ¨å¥¨æ¡ˆ

### ğŸ¯ æ¨å¥¨: æ¡ˆ4ï¼ˆé…åˆ—é †åº + æ˜ç¤ºçš„ãªç®¡ç†ï¼‰+ Prev/Nextãƒã‚°ä¿®æ­£

**ç†ç”±:**
1. **å®Ÿè£…ã‚³ã‚¹ãƒˆãŒæœ€ã‚‚ä½ã„**ï¼ˆ1è¡Œå¤‰æ›´ + ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰
2. **ç ´å£Šçš„å¤‰æ›´ãªã—**ï¼ˆæ—¢å­˜ã®URLã€ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’ç¶­æŒï¼‰
3. **ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ä¿è¨¼å¯èƒ½**ï¼ˆæ‰‹å‹•ãƒŸã‚¹ã‚’é˜²ã’ã‚‹ï¼‰
4. **å°†æ¥çš„ã«created_atã¸ç§»è¡Œå¯èƒ½**ï¼ˆéç ´å£Šçš„ï¼‰

**å®Ÿè£…æ‰‹é †:**

1. **latest.tsxã‚’ä¿®æ­£**
   ```typescript
   // Sort by ID descending (latest first)
   illusts.sort((a, b) => b.id - a.id);
   ```
   â†“
   ```typescript
   // Reverse to show latest added pages first
   // (newer pages are added at the end of config.illusts array)
   illusts.reverse();
   ```

2. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè¿½åŠ **ï¼ˆCLAUDE.mdï¼‰
   - vt_config.jsonã®é…åˆ—é †åºã¯ã€Œè¿½åŠ é †ã€ã§ã‚ã‚‹
   - IDã§ã‚½ãƒ¼ãƒˆã—ã¦ã¯ã„ã‘ãªã„
   - æ–°è¦è¿½åŠ ã¯å¿…ãšé…åˆ—ã®æœ€å¾Œã«è¿½åŠ 

3. **ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§é †åºã‚’ä¿è¨¼**
   - `add_from_add_new_vt.js`: é…åˆ—ã®æœ€å¾Œã«è¿½åŠ ï¼ˆã™ã§ã«å®Ÿè£…æ¸ˆã¿ï¼‰
   - å°†æ¥çš„ã«: ã‚½ãƒ¼ãƒˆé˜²æ­¢ãƒã‚§ãƒƒã‚¯

4. **ç®¡ç†ç”»é¢ã§ã‚‚é…åˆ—é †åºã‚’ç¶­æŒ**
   - Add/Skipæ“ä½œæ™‚ã«é…åˆ—ã®æœ€å¾Œã«è¿½åŠ 

---

## æ¬¡å–„æ¡ˆ: æ¡ˆ5ï¼ˆæ®µéšçš„ç§»è¡Œï¼‰

é•·æœŸçš„ã«å …ç‰¢ã«ã—ãŸã„å ´åˆã¯ã€æ¡ˆ4ã‚’å®Ÿè£…ã—ãŸå¾Œã€æ®µéšçš„ã«created_atãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ ã™ã‚‹ã€‚

**ç§»è¡Œæ‰‹é †:**
1. Phase 1: é…åˆ—é †åºã§ã‚½ãƒ¼ãƒˆï¼ˆimmediateï¼‰
2. Phase 2: æ–°è¦ãƒšãƒ¼ã‚¸ã«created_atè‡ªå‹•ä»˜ä¸ï¼ˆ1é€±é–“å¾Œï¼‰
3. Phase 3: æ—¢å­˜ãƒšãƒ¼ã‚¸ã«created_atè¿½åŠ ï¼ˆæ‰‹å‹•/ã‚¹ã‚¯ãƒªãƒ—ãƒˆã€1ãƒ¶æœˆå¾Œï¼‰
4. Phase 4: created_atã§ã‚½ãƒ¼ãƒˆã«åˆ‡ã‚Šæ›¿ãˆï¼ˆ3ãƒ¶æœˆå¾Œï¼‰

---

## å´ä¸‹æ¡ˆ

### âŒ æ¡ˆ3ï¼ˆIDä»˜ã‘æ›¿ãˆï¼‰
- ç ´å£Šçš„å¤‰æ›´ã™ãã‚‹
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’æãªã†
- å®Ÿè£…ã‚³ã‚¹ãƒˆãŒé«˜ã„

### âš ï¸ æ¡ˆ2ï¼ˆcreated_atè¿½åŠ ï¼‰
- çŸ­æœŸçš„ãªå®Ÿè£…ã‚³ã‚¹ãƒˆãŒé«˜ã„
- éå»ã®ãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ æ—¥æ™‚ãŒä¸æ˜
- ãŸã ã—é•·æœŸçš„ã«ã¯æœ€ã‚‚å …ç‰¢

---

---

## ğŸ¯ æ±ºå®šäº‹é …: ãƒ«ãƒ¼ãƒ«ã®æ•´ç†ï¼ˆè¨­è¨ˆãƒ¬ãƒ™ãƒ«ï¼‰

### æ˜ç¢ºãªå½¹å‰²åˆ†æ‹…

| è¦ç´  | å½¹å‰² | å®Ÿè£… |
|------|------|------|
| **ID** | ãŸã ã®è­˜åˆ¥å­ï¼ˆURLç”¨ã®keyï¼‰ | é †åºã®æ„å‘³ã¯ä¸€åˆ‡ãªã„ |
| **æ™‚é–“é †ï¼ˆè¿½åŠ é †ï¼‰** | vt_config.jsonã®é…åˆ—é †ã§è¡¨ç¾ | æ–°ã—ã„ãƒšãƒ¼ã‚¸ã¯é…åˆ—ã®æœ€å¾Œã«è¿½åŠ  |
| **ã€Œæœ€æ–°é †ã€** | ã€Œè¿½åŠ é †ã®é€†é †ã€ã¨ã—ã¦å®šç¾© | `[...illusts].reverse()` |

### å„æ©Ÿèƒ½ã®å®Ÿè£…

#### `/latest` ãƒšãƒ¼ã‚¸
```typescript
// é…åˆ—é †ã‚’é€†é †ã«ã—ãŸã‚‚ã®ã‚’è¡¨ç¤º
const sortedIllusts = [...illusts].reverse();
```

#### Prev/Nextãƒªãƒ³ã‚¯
```typescript
// é…åˆ—é †ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å‰å¾Œã«å‹•ã‹ã—ã¦æ±ºã‚ã‚‹
const getPrevId = () => {
  if (props.currentIndex <= 0) return null;
  return config.illusts[props.currentIndex - 1].id; // å‰ã®indexã®ID
};
const getNextId = () => {
  if (props.currentIndex >= props.totalIllusts - 1) return null;
  return config.illusts[props.currentIndex + 1].id; // æ¬¡ã®indexã®ID
};
```

### ã“ã®ãƒ«ãƒ¼ãƒ«ã®åˆ©ç‚¹

âœ… **IDãŒè¿½åŠ é †ã˜ã‚ƒãªã„ã“ã¨ã¯å•é¡Œã«ãªã‚‰ãªã„**
- IDã¯å˜ãªã‚‹è­˜åˆ¥å­
- æ¬ ç•ªã‚’åŸ‹ã‚ã¦ã‚‚å•é¡Œãªã—

âœ… **ã‚·ãƒ³ãƒ—ãƒ«ã§ç›´æ„Ÿçš„**
- é…åˆ—é † = è¿½åŠ é †ï¼ˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ä¿è¨¼ï¼‰
- æœ€æ–°é † = é…åˆ—ã®é€†é †

âœ… **ç ´å£Šçš„å¤‰æ›´ãªã—**
- URLã¯å¤‰ã‚ã‚‰ãªã„
- ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚‚å¤‰ã‚ã‚‰ãªã„

âœ… **ä¸€è²«æ€§ãŒã‚ã‚‹**
- `/latest`ã¨Prev/NextãŒåŒã˜é †åºæ¦‚å¿µã‚’ä½¿ã†

---

## å®Ÿè£…æ‰‹é †

### Step 1: `[page].tsx` ã®Prev/Nextãƒã‚°ä¿®æ­£

**ç¾åœ¨ï¼ˆãƒã‚°ï¼‰:**
```typescript
const getPrevId = () => {
  if (props.currentIndex <= 0) return null;
  return props.currentIndex; // âŒ ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è¿”ã—ã¦ã„ã‚‹
};
const getNextId = () => {
  if (props.currentIndex >= props.totalIllusts - 1) return null;
  return props.currentIndex + 2; // âŒ ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹+2ã‚’è¿”ã—ã¦ã„ã‚‹
};
```

**ä¿®æ­£å¾Œ:**
```typescript
const getPrevId = () => {
  if (props.currentIndex <= 0) return null;
  // é…åˆ—ã®å‰ã®è¦ç´ ã®IDã‚’è¿”ã™
  return props.prevId;
};
const getNextId = () => {
  if (props.currentIndex >= props.totalIllusts - 1) return null;
  // é…åˆ—ã®æ¬¡ã®è¦ç´ ã®IDã‚’è¿”ã™
  return props.nextId;
};
```

**getStaticPropsã§è¨ˆç®—:**
```typescript
const currentIndex = config.illusts.findIndex((item) => item.id === parseInt(page, 10));
const prevId = currentIndex > 0 ? config.illusts[currentIndex - 1].id : null;
const nextId = currentIndex < config.illusts.length - 1 ? config.illusts[currentIndex + 1].id : null;

return {
  props: {
    // ... existing props
    prevId,
    nextId,
  }
};
```

### Step 2: `latest.tsx` ã®ä¿®æ­£

**ç¾åœ¨ï¼ˆIDé™é †ï¼‰:**
```typescript
illusts.sort((a, b) => b.id - a.id);
```

**ä¿®æ­£å¾Œï¼ˆé…åˆ—é€†é †ï¼‰:**
```typescript
// Reverse to show latest added pages first
// (newer pages are added at the end of config.illusts array)
illusts.reverse();
```

### Step 3: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè¿½åŠ ï¼ˆCLAUDE.mdï¼‰

```markdown
## vt_config.jsonã®é…åˆ—é †åº

**é‡è¦**: vt_config.jsonã®é…åˆ—é †åºã¯ã€Œè¿½åŠ é †ã€ã‚’è¡¨ã™ã€‚

- æ–°ã—ã„ãƒšãƒ¼ã‚¸ã¯å¿…ãšé…åˆ—ã®æœ€å¾Œã«è¿½åŠ ã™ã‚‹
- IDã§ã‚½ãƒ¼ãƒˆã—ã¦ã¯ã„ã‘ãªã„
- `/latest`ãƒšãƒ¼ã‚¸ã¯é…åˆ—ã®é€†é †ã§è¡¨ç¤º
- Prev/Nextãƒªãƒ³ã‚¯ã¯é…åˆ—é †ã§ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
```

---

## çµè«–

**å³åº§ã«å®Ÿè£…: é…åˆ—é †åºãƒ™ãƒ¼ã‚¹ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³**

ç†ç”±:
- IDã¯å˜ãªã‚‹è­˜åˆ¥å­ã¨ã—ã¦æ‰±ã†
- é…åˆ—é † = è¿½åŠ é †ï¼ˆæ˜ç¤ºçš„ã«ç®¡ç†ï¼‰
- æœ€æ–°é † = é…åˆ—ã®é€†é †
- ã‚·ãƒ³ãƒ—ãƒ«ã§ä¸€è²«æ€§ãŒã‚ã‚‹
- ç ´å£Šçš„å¤‰æ›´ãªã—

æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:
1. `[page].tsx`ã®Prev/Nextãƒã‚°ä¿®æ­£ï¼ˆprevId/nextIdã‚’propsã§æ¸¡ã™ï¼‰
2. `latest.tsx`ã‚’é…åˆ—é€†é †ã«ä¿®æ­£ï¼ˆreverse()ï¼‰
3. CLAUDE.mdã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè¿½åŠ 
4. ãƒ†ã‚¹ãƒˆã—ã¦å‹•ä½œç¢ºèª
5. ã‚³ãƒŸãƒƒãƒˆãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤
